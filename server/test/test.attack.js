var World = require('../world');
var Config = require('../../shared/config.js');
var Util = require('../test_util.js');

exports.testAttackAirplainBomb = function(test) {

    var map = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  2B .  .  .  .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  2p .  .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  2aB2p 2v 2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  .  .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  1a .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  1aC.  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    var world = new World();

    Util.setupWorld(test, world, map, world.players[0].id, Config.ATTACK_PHASE);
    Util.attackAndCheck(test, world, world.players[0].id, {from: [4, 11], to: [4, 3]});

    var map_expected = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  .  .  .  2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  .  .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  1aC.  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    Util.checkWorld(test, world, map_expected, world.players[1].id, Config.MOVE_PHASE);

    test.done();
};

exports.testAttackAirplainBomb2 = function(test) {

    var map = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  2B .  .  .  .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  2p .  .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  2aB2p 2v 2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  1a .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  .  .  1aC.  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  .  .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    var world = new World();

    Util.setupWorld(test, world, map, world.players[0].id, Config.ATTACK_PHASE);
    Util.attackAndCheck(test, world, world.players[0].id, {from: [4, 4], to: [4, 3]});

    var map_expected = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  .  .  .  2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  .  .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    Util.checkWorld(test, world, map_expected, world.players[1].id, Config.MOVE_PHASE);

    test.done();
};

exports.testAttackAirplainBomb3 = function(test) {

    var map = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  2B .  .  1t .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  2p 1v .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  2aB2p 2v 2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  1B .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  1m .  1aC.  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  1a .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    var world = new World();

    Util.setupWorld(test, world, map, world.players[0].id, Config.ATTACK_PHASE);
    Util.attackAndCheck(test, world, world.players[0].id, {from: [4, 6], to: [4, 3]});

    var map_expected = [
        "+-----------------------------------------------+",
        "|   | 0  1  2  3  4  5  6  7  8  9  10 11 12 13 |",
        "|---+-------------------------------------------|",
        "|0  | .  .  .  .  2B .  .  .  .  .  .  .  .  .  |",
        "|1  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|2  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|3  | .  2a .  .  .  .  .  2b 2p .  .  .  .  .  |",
        "|4  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|5  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|6  | .  .  .  .  .  .  .  1v 1t .  .  2p .  .  |",
        "|7  | .  .  .  .  .  .  .  .  .  .  2p .  .  .  |",
        "|8  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|9  | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|10 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|11 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|12 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "|13 | .  .  .  .  .  .  .  .  .  .  .  .  .  .  |",
        "+-----------------------------------------------+"
    ];

    Util.checkWorld(test, world, map_expected, world.players[1].id, Config.MOVE_PHASE);

    test.done();
};

